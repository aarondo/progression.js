(function(e){"use strict";function r(r,i){this.element=r;this.$elem=e(this.element);this.options=e.extend({},n,i);this._defaults=n;this._name=t;this.init()}var t="progression",n={tooltipWidth:"200",tooltipPosition:"right",tooltipOffset:"50",showProgressBar:true,showHelper:true,validator:false,tooltipFontSize:"14",tooltipFontColor:"ffffff",progressBarBackground:"ffffff",progressBarColor:"6EA5E1",tooltipBackgroundColor:"a2cbfa",tooltipPadding:"10",tooltipAnimate:true};r.prototype={init:function(){function d(e,t){return t/e*100}var t=this.$elem.css("position","relative").find("[data-progression]"),n=t.length,r=this.$elem.attr("id"),i=t.first().position().top,s=t.first().attr("data-helper"),o,u,a,f,l,c,h,p;if(t.first().attr("data-helper")!==undefined){s=t.first().attr("data-helper")}else{s=""}if(this.options.showProgressBar===false){o="display:none; "}else{o=""}if(this.options.showHelper===false){u="display:none; "}else{u=""}a=this.options.tooltipAnimate?"-webkit-transition: top .3s ease-in-out;-moz-transition: top .3s ease-in-out;-o-transition: top .3s ease-in-out;transition: top .3s ease-in-out; ":"";f=this.options.tooltipAnimate?"-webkit-transition: width .3s ease-in-out;-moz-transition: width .3s ease-in-out;-o-transition: width .3s ease-in-out;transition: width .3s ease-in-out; ":"";l=this.options.tooltipPosition==="right"?"border-color: transparent #"+this.options.tooltipBackgroundColor+" transparent transparent;":"border-color: transparent transparent transparent #"+this.options.tooltipBackgroundColor;c=parseInt(this.options.tooltipWidth,10)+parseInt(this.options.tooltipOffset,10);var p=e('<div class="syco_tooltip">'),v=a+"padding:"+this.options.tooltipPadding+"px; top:"+i+"px; position: absolute; background:#"+this.options.tooltipBackgroundColor+";"+this.options.tooltipPosition+":-"+c+"px; width: "+this.options.tooltipWidth+"px",m='<span class="triangle_'+this.options.tooltipPosition+'" style="'+l+'"></span>',g='<p style="'+u+"font-size: "+this.options.tooltipFontSize+"px; color: #"+this.options.tooltipFontColor+'"><span class="tooltip_helper"><span data-index="1" >1</span>/'+n+"</span> "+s+"</p>",y='<div aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-valuetext="Step 1 of '+n+'" class="percentagebar" role="progressbar" style="'+o+"background: #"+this.options.progressBarBackground+'"><div class="percentagebarinner" style="'+f+"background: #"+this.options.progressBarColor+'"></div><span class="percent" '+o+">0%</span></div></div>";h=m+g+y;p.attr("data-tooltip",r).attr("style",v).prepend(h);this.$elem.prepend(p);t.each(function(){var t=e(this),n=t.position().top;t.bind("live focus change",function(){var r=t.parent().parent().find("[data-progression]").length,i=t.parent().parent().attr("id"),s=e('[data-tooltip="'+i+'"]'),o=t.attr("data-helper"),u=s.find('div[role="progressbar"]'),a,f;if(t.attr("data-helper")!==undefined){o=t.attr("data-helper")}else{o=""}a=parseInt(e("#"+i).find("[data-progression]").index(t),10)+1;f=d(r,a).toFixed(0);s.find("p").html('<span class="tooltip_helper"><span data-index="1" >'+a+"</span>/"+r+"</span> "+o).parent().find(".percentagebarinner").css("width",parseInt(f,10)+"%").next().html(parseInt(f,10)+"%");s.css("top",n+"px");u.attr("aria-valuenow",f);u.attr("aria-valuetext","Step "+a+" of "+r)})})}};e.fn[t]=function(n){return this.each(function(){if(!e.data(this,"plugin_"+t)){e.data(this,"plugin_"+t,new r(this,n))}})}})(jQuery)